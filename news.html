<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spinxoi - ताज़ा खबरें</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --home-color: #FF6B6B;
      --quiz-color: #4ECDC4;
      --facts-color: #2ECC71;
      --history-color: #A66CFF;
      --news-color: #e53935;
      --dark-bg: #2c3e50;
      --text-light: #ffffff;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', 'Nirmala UI', 'Arial Unicode MS', sans-serif;
      background: #f8f9fa;
      color: #333;
      line-height: 1.6;
    }
    
    /* Navigation */
    nav {
      background: linear-gradient(135deg, var(--dark-bg), #34495e);
      padding: 0.5rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      padding: 8px;
      list-style: none;
      margin: 0;
    }
    
    .navbar li a {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 20px;
      font-weight: bold;
      color: var(--text-light);
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 14px;
      text-align: center;
    }
    
    .navbar li:nth-child(1) a { background: linear-gradient(45deg, var(--home-color), #FF8E53); }
    .navbar li:nth-child(2) a { background: linear-gradient(45deg, var(--quiz-color), #45B7AF); }
    .navbar li:nth-child(3) a { background: linear-gradient(45deg, var(--facts-color), #27AE60); }
    .navbar li:nth-child(4) a { background: linear-gradient(45deg, var(--history-color), #8A4FFF); }
    .navbar li:nth-child(5) a { background: linear-gradient(45deg, var(--news-color), #ff6b6b); }
    .navbar li:nth-child(6) a { background: linear-gradient(45deg, #3498db, #2c3e50); }
    .navbar li:nth-child(7) a { background: linear-gradient(45deg, #9b59b6, #8e44ad); }
    
    .navbar li a:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .navbar li.active a {
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transform: scale(1.05);
      border: 2px solid var(--text-light);
    }
    
    /* Breaking news bar */
    .breaking-bar {
      background: #d50000;
      color: white;
      padding: 10px;
      overflow: hidden;
      white-space: nowrap;
      font-weight: bold;
      position: relative;
      z-index: 999;
      display: flex;
      align-items: center;
    }
    
    .breaking-label {
      background: white;
      color: #d50000;
      padding: 4px 8px;
      border-radius: 4px;
      margin-right: 12px;
      font-size: 13px;
      flex-shrink: 0;
    }
    
    .breaking-content {
      display: inline-block;
      white-space: nowrap;
      animation: scrollText 60s linear infinite;
      padding-left: 100%;
    }
    
    @keyframes scrollText {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }
    
    .ticker-item {
      display: inline-block;
      padding-right: 35px;
      position: relative;
      font-size: 14px;
    }
    
    .ticker-item:after {
      content: "⚡";
      position: absolute;
      right: 10px;
    }
    
    .ticker-item:last-child:after { display: none; }
    
    /* Header */
    .main-header {
      background: linear-gradient(135deg, #ff3d00, #d32f2f);
      color: white;
      padding: 1rem 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px;
      gap: 15px;
    }
    
    .logo-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    
    .site-title {
      margin: 0;
      line-height: 1.3;
      font-size: 1.5rem;
      text-align: center;
    }
    
    .hindi-title {
      font-family: 'Noto Sans Devanagari', sans-serif;
      display: block;
      font-weight: 600;
      font-size: 1.8rem;
    }
    
    .subtitle {
      font-size: 0.9rem;
      opacity: 0.9;
      display: block;
    }
    
    .header-controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      width: 100%;
    }
    
    .live-status {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.1);
      padding: 6px 12px;
      border-radius: 25px;
      font-size: 14px;
    }
    
    .refresh-btn {
      background: rgba(255,255,255,0.9);
      color: #ff3d00;
      border: none;
      padding: 8px 20px;
      border-radius: 25px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      font-weight: 500;
    }
    
    .refresh-btn:hover {
      background: white;
      transform: translateY(-2px);
    }
    
    .refresh-icon {
      transition: transform 0.5s ease;
    }
    
    .refresh-btn:hover .refresh-icon {
      transform: rotate(360deg);
    }
    
    /* Connection status */
    .connection-status {
      text-align: center;
      padding: 10px;
      background: #f8f8f8;
      border-radius: 5px;
      margin: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 14px;
    }
    
    .status-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #4caf50;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    /* Stream selector */
    .stream-selector {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 10px 15px;
      overflow-x: auto;
      padding-bottom: 5px;
    }
    
    .stream-btn {
      padding: 7px 14px;
      background: #f0f0f0;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
      flex-shrink: 0;
    }
    
    .stream-btn.active {
      background: #ff3d00;
      color: white;
    }
    
    /* Live stream */
    .live-stream {
      margin: 15px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      background: #000;
      position: relative;
      height: 250px;
    }
    
    .live-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: red;
      color: white;
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
      z-index: 1;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .live-stream iframe {
      width: 100%;
      height: 100%;
      display: block;
      border: none;
    }
    
    .stream-error {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: white;
      text-align: center;
      padding: 20px;
    }
    
    .stream-error i {
      font-size: 40px;
      margin-bottom: 15px;
      color: #ff6b6b;
    }
    
    .stream-error h3 {
      margin-bottom: 10px;
      font-size: 18px;
    }
    
    .stream-error p {
      margin-bottom: 15px;
      font-size: 14px;
      opacity: 0.8;
    }
    
    .retry-btn {
      background: #ff3d00;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }
    
    .retry-btn:hover {
      background: #ff5722;
    }
    
    /* Category tabs */
    .category-tabs {
      display: flex;
      justify-content: flex-start;
      gap: 8px;
      margin: 15px;
      overflow-x: auto;
      padding-bottom: 10px;
    }
    
    .category-tab {
      padding: 7px 14px;
      background: #eee;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
      flex-shrink: 0;
    }
    
    .category-tab.active {
      background: #ff3d00;
      color: white;
    }
    
    /* News grid */
    .container {
      padding: 10px;
    }
    
    .news-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      padding: 0 10px;
    }
    
    .news-item {
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    
    .news-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .news-item h3 {
      color: #1976d2;
      margin: 0 0 10px;
      font-size: 18px;
      line-height: 1.4;
    }
    
    .news-item p {
      margin-bottom: 12px;
      color: #555;
      line-height: 1.5;
      font-size: 15px;
    }
    
    .news-item a {
      color: #e91e63;
      text-decoration: none;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      transition: color 0.2s;
      font-size: 14px;
    }
    
    .news-item .source {
      font-size: 12px;
      color: #888;
      margin-top: 8px;
    }
    
    /* Footer */
    footer {
      text-align: center;
      font-size: 14px;
      color: #777;
      padding: 25px 15px;
      margin-top: 30px;
      background: white;
      border-top: 1px solid #eee;
      line-height: 1.8;
    }
    
    /* Loading animation */
    .loading {
      display: inline-block;
      width: 18px;
      height: 18px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Tablet and Desktop adjustments */
    @media (min-width: 768px) {
      .header-content {
        flex-direction: row;
        justify-content: space-between;
      }
      
      .logo-section {
        align-items: flex-start;
      }
      
      .header-controls {
        justify-content: flex-end;
      }
      
      .live-stream {
        height: 400px;
        max-width: 800px;
        margin: 20px auto;
      }
      
      .news-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }
      
      .category-tabs {
        justify-content: center;
      }
      
      .connection-status, .stream-selector {
        max-width: 800px;
        margin: 15px auto;
      }
    }
    
    @media (min-width: 992px) {
      .news-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Menu -->
  <nav>
    <ul class="navbar">
      <li itemprop="name"><a href="index.html" itemprop="url">होम</a></li>
      <li itemprop="name"><a href="quiz.html" itemprop="url">क्विज़</a></li>
      <li itemprop="name"><a href="facts.html" itemprop="url">रोचक तथ्य</a></li>
      <li itemprop="name"><a href="history.html" itemprop="url">इतिहास</a></li>
      <li class="active" itemprop="name"><a href="news.html" itemprop="url">ताज़ा खबरें</a></li>
      <li itemprop="name"><a href="about.html" itemprop="url">हमारे बारे में</a></li>
      <li itemprop="name"><a href="contact.html" itemprop="url">संपर्क</a></li>
    </ul>
  </nav>

  <div class="breaking-bar">
    <div class="breaking-label">ताज़ा खबर</div>
    <div class="breaking-content" id="breaking-news">
      <span class="ticker-item">खबरें लोड हो रही हैं...</span>
    </div>
  </div>

  <header class="main-header">
    <div class="header-content">
      <div class="logo-section">
        <h1 class="site-title">
          <span class="hindi-title">स्पिन्क्सोइ</span>
          <span class="subtitle">आज की ताज़ा खबरें</span>
        </h1>
      </div>
  
      <div class="header-controls">
        <div class="live-status">
          <i class="fas fa-clock"></i>
          <span id="updated-time" class="timestamp">अंतिम अपडेट: लोड हो रहा है...</span>
        </div>
        
        <button class="refresh-btn" onclick="loadNews()" id="refresh-btn" aria-label="ताज़ा अपडेट">
          <span class="refresh-icon" id="refresh-icon">
            <i class="fas fa-sync-alt"></i>
          </span>
          <span class="btn-text">अपडेट करें</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Connection status indicator -->
  <div class="connection-status">
    <div class="status-indicator"></div>
    <div class="status-text">लाइव स्ट्रीम कनेक्टेड: आज तक</div>
  </div>

  <!-- Stream selector -->
  <div class="stream-selector" id="stream-selector">
    <button class="stream-btn active" onclick="changeStream('aajtak')">आज तक</button>
    <button class="stream-btn" onclick="changeStream('indiatv')">इंडिया टीवी</button>
    <button class="stream-btn" onclick="changeStream('abp')">एबीपी न्यूज</button>
    <button class="stream-btn" onclick="changeStream('republic')">रिपब्लिक भारत</button>
    <button class="stream-btn" onclick="changeStream('ndtv')">एनडीटीवी</button>
  </div>

  <!-- Live stream -->
  <div class="live-stream">
    <div class="live-badge">
      <i class="fas fa-circle"></i> LIVE
    </div>
    <div class="stream-container" id="stream-container">
      <!-- Stream will be loaded here -->
    </div>
  </div>

  <div class="category-tabs">
    <div class="category-tab active" onclick="changeCategory('india')">भारत</div>
    <div class="category-tab" onclick="changeCategory('world')">विश्व</div>
    <div class="category-tab" onclick="changeCategory('sports')">खेल</div>
    <div class="category-tab" onclick="changeCategory('business')">व्यापार</div>
    <div class="category-tab" onclick="changeCategory('entertainment')">मनोरंजन</div>
    <div class="category-tab" onclick="changeCategory('technology')">टेक्नोलॉजी</div>
  </div>

  <div class="container">
    <div class="news-grid" id="news-container">
      <!-- News items will load here -->
      <div class="news-item">
        <h3>भारत ने जीता विश्व कप</h3>
        <p>भारतीय क्रिकेट टीम ने आज फाइनल मैच में ऑस्ट्रेलिया को हराकर विश्व कप जीत लिया। यह भारत की छठी विश्व कप जीत है।</p>
        <a href="#" target="_blank" rel="noopener">
          <i class="fas fa-external-link-alt"></i> पूरा पढ़ें
        </a>
        <div class="source">स्रोत: खेल समाचार</div>
      </div>
      <div class="news-item">
        <h3>नई शिक्षा नीति लागू</h3>
        <p>केंद्र सरकार ने आज नई शिक्षा नीति को लागू करने की घोषणा की। इस नीति में 10+2 प्रणाली को समाप्त कर 5+3+3+4 प्रणाली लाई जाएगी।</p>
        <a href="#" target="_blank" rel="noopener">
          <i class="fas fa-external-link-alt"></i> पूरा पढ़ें
        </a>
        <div class="source">स्रोत: शिक्षा समाचार</div>
      </div>
      <div class="news-item">
        <h3>टेक्नोलॉजी सम्मेलन का आयोजन</h3>
        <p>बेंगलुरु में अंतर्राष्ट्रीय टेक्नोलॉजी सम्मेलन का आयोजन किया गया जिसमें 50 से अधिक देशों के प्रतिनिधियों ने भाग लिया।</p>
        <a href="#" target="_blank" rel="noopener">
          <i class="fas fa-external-link-alt"></i> पूरा पढ़ें
        </a>
        <div class="source">स्रोत: टेक न्यूज</div>
      </div>
    </div>
  </div>

  <footer>
    <p>© 2025 Spinxoi. सर्वाधिकार सुरक्षित।</p>
    <p>हमारी नीतियाँ: <a href="privacy.html">गोपनीयता नीति</a> | <a href="terms.html">उपयोग की शर्तें</a></p>
    <p>संपर्क करें: contact@spinxoi.com</p>
  </footer>

  <script>
    // API Configuration
    const API_KEY = 'rtpswcfphpimohnes6wjslddc8gp90l79qek8jie';
    const categories = {
      'india': 'https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRFZxYUdjU0FtVnVHZ0pWVXlnQVAB?hl=hi&gl=IN&ceid=IN%3Ahi',
      'world': 'https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRGx1YlY4U0FtVnVHZ0pWVXlnQVAB?hl=hi&gl=IN&ceid=IN%3Ahi',
      'sports': 'https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRFp1ZEdvU0FtVnVHZ0pWVXlnQVAB?hl=hi&gl=IN&ceid=IN%3Ahi',
      'business': 'https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRGx6TVdZU0FtVnVHZ0pWVXlnQVAB?hl=hi&gl=IN&ceid=IN%3Ahi',
      'entertainment': 'https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNREpxYW5RU0FtVnVHZ0pWVXlnQVAB?hl=hi&gl=IN&ceid=IN%3Ahi',
      'technology': 'https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRGRqTVhZU0FtVnVHZ0pWVXlnQVAB?hl=hi&gl=IN&ceid=IN%3Ahi'
    };

    // Stream sources - Working YouTube Live Streams
    const streams = {
      'aajtak': {
        id: 'UCt4t-jeY85JegMlZ-E5UWtA',
        name: 'आज तक',
        embedUrl: 'https://www.youtube.com/live/oDjT1VRd9NM?si=pueRwgST4jAWUYG4'
      },
      'indiatv': {
        id: 'UCttspZesZIDEwwpVIgoZtWQ',
        name: 'इंडिया टीवी',
        embedUrl: 'https://www.youtube.com/embed/live_stream?channel=UCttspZesZIDEwwpVIgoZtWQ'
      },
      'abp': {
        id: 'UCRWFSbif-RFENbBrSiez1DA',
        name: 'एबीपी न्यूज',
        embedUrl: 'https://www.youtube.com/embed/live_stream?channel=UCRWFSbif-RFENbBrSiez1DA'
      },
      'republic': {
        id: 'UCwqusr8YDwM-3mEYTDeJHzw',
        name: 'रिपब्लिक भारत',
        embedUrl: 'https://www.youtube.com/embed/live_stream?channel=UCwqusr8YDwM-3mEYTDeJHzw'
      },
      'ndtv': {
        id: 'UC9CYT9gSNLevX5ey2_6CK0Q',
        name: 'एनडीटीवी',
        embedUrl: 'https://www.youtube.com/embed/live_stream?channel=UC9CYT9gSNLevX5ey2_6CK0Q'
      }
    };

    // DOM Elements
    const newsContainer = document.getElementById("news-container");
    const breakingBar = document.getElementById("breaking-news");
    const updatedTimeEl = document.getElementById("updated-time");
    const refreshBtn = document.getElementById("refresh-btn");
    const refreshIcon = document.getElementById("refresh-icon");
    const streamContainer = document.getElementById("stream-container");
    const streamSelector = document.getElementById("stream-selector");
    
    let currentCategory = 'india';
    let currentStream = 'aajtak';
    let isLoading = false;

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      loadNews();
      loadStream(currentStream);
      setInterval(loadNews, 300000); // 5 minutes update
    });

    // Load YouTube Live Stream
    function loadStream(streamKey) {
      const stream = streams[streamKey];
      if (!stream) return;
      
      // Show loading state
      streamContainer.innerHTML = `
        <div class="stream-error">
          <i class="fas fa-spinner fa-spin"></i>
          <h3>लाइव स्ट्रीम लोड हो रही है...</h3>
          <p>कृपया प्रतीक्षा करें</p>
        </div>
      `;
      
      // Create iframe with proper parameters
      const iframe = document.createElement('iframe');
      iframe.width = '100%';
      iframe.height = '100%';
      iframe.src = `${stream.embedUrl}&autoplay=1&mute=0&rel=0&modestbranding=1&playsinline=1`;
      iframe.frameBorder = '0';
      iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
      iframe.allowFullscreen = true;
      iframe.referrerPolicy = 'no-referrer-when-downgrade';
      iframe.title = `${stream.name} Live Stream`;
      
      // Handle iframe load error
      iframe.onerror = function() {
        console.error('Stream loading error for:', stream.name);
        showStreamError(stream.name);
      };
      
      // Replace container content with iframe
      streamContainer.innerHTML = '';
      streamContainer.appendChild(iframe);
      
      // Update connection status
      document.querySelector('.status-text').textContent = `लाइव स्ट्रीम कनेक्टेड: ${stream.name}`;
      
      // Set a timeout to check if stream loaded successfully
      setTimeout(() => {
        console.log(`Stream ${stream.name} loaded successfully`);
      }, 3000);
    }
    
    // Show stream error message
    function showStreamError(streamName) {
      streamContainer.innerHTML = `
        <div class="stream-error">
          <i class="fas fa-exclamation-triangle"></i>
          <h3>लाइव स्ट्रीम उपलब्ध नहीं</h3>
          <p>${streamName} का लाइव स्ट्रीम वर्तमान में उपलब्ध नहीं है। कृपया बाद में पुनः प्रयास करें या कोई अन्य चैनल चुनें।</p>
          <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
            <button class="retry-btn" onclick="loadStream('${currentStream}')">
              <i class="fas fa-redo"></i> पुनः प्रयास
            </button>
            <button class="retry-btn" onclick="tryNextStream()">
              <i class="fas fa-forward"></i> अगला चैनल
            </button>
            <button class="retry-btn" onclick="openYouTube()">
              <i class="fab fa-youtube"></i> YouTube पर देखें
            </button>
          </div>
        </div>
      `;
      
      document.querySelector('.status-text').textContent = `स्ट्रीम त्रुटि: ${streamName}`;
      document.querySelector('.status-indicator').style.background = '#f44336';
    }
    
    // Open YouTube in new tab
    function openYouTube() {
      const stream = streams[currentStream];
      if (stream) {
        window.open(`https://www.youtube.com/channel/${stream.id}/live`, '_blank');
      }
    }
    
    // Try next available stream
    function tryNextStream() {
      const streamKeys = Object.keys(streams);
      const currentIndex = streamKeys.indexOf(currentStream);
      const nextIndex = (currentIndex + 1) % streamKeys.length;
      const nextStream = streamKeys[nextIndex];
      
      // Update active button
      streamSelector.querySelectorAll('.stream-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      streamSelector.querySelector(`button[onclick="changeStream('${nextStream}')"]`).classList.add('active');
      
      // Change to next stream
      changeStream(nextStream);
    }

    // Change news category
    function changeCategory(category) {
      currentCategory = category;
      document.querySelectorAll('.category-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.classList.add('active');
      loadNews();
    }

    // Change stream source
    function changeStream(stream) {
      currentStream = stream;
      
      // Update active button
      streamSelector.querySelectorAll('.stream-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Reset status indicator
      document.querySelector('.status-indicator').style.background = '#4caf50';
      
      // Load new stream
      loadStream(stream);
    }

    // Update news ticker
    function updateTicker(items) {
      const ticker = document.getElementById('breaking-news');
      ticker.innerHTML = items.map(item => 
        `<span class="ticker-item">${item.title}</span>`
      ).join('');
      
      // Restart ticker animation
      ticker.style.animation = 'none';
      void ticker.offsetWidth;
      ticker.style.animation = 'scrollText 60s linear infinite';
    }

    // Load news
    async function loadNews() {
      if (isLoading) return;
      isLoading = true;
      refreshIcon.innerHTML = '<div class="loading"></div>';
      refreshBtn.disabled = true;

      try {
        const response = await fetch(
          `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(categories[currentCategory])}&api_key=${API_KEY}`
        );
        
        if (!response.ok) throw new Error('सर्वर त्रुटि');
        
        const data = await response.json();
        if (data.status !== 'ok') throw new Error(data.message);

        // Process news items
        const items = data.items.slice(0, 8);
        newsContainer.innerHTML = items.map(item => `
          <div class="news-item">
            <h3>${item.title}</h3>
            <p>${item.description.replace(/<[^>]+>/g, '').substring(0, 120)}...</p>
            <a href="${item.link}" target="_blank" rel="noopener">
              <i class="fas fa-external-link-alt"></i> पूरा पढ़ें
            </a>
            <div class="source">स्रोत: ${item.author || 'Google News'}</div>
          </div>
        `).join('');

        // Update breaking news
        updateTicker(items);

        // Update timestamp
        updatedTimeEl.innerHTML = `
          अंतिम अपडेट: ${new Date().toLocaleTimeString('hi-IN')}
          <small>(${getCategoryName(currentCategory)})</small>
        `;

      } catch (error) {
        console.error('त्रुटि:', error);
        newsContainer.innerHTML = `
          <div class="news-item">
            <h3>त्रुटि!</h3>
            <p>${error.message || 'खबरें लोड नहीं हो पाईं'}</p>
            <a href="javascript:loadNews()">
              <i class="fas fa-redo"></i> पुनः प्रयास करें
            </a>
          </div>
        `;
      } finally {
        isLoading = false;
        refreshIcon.innerHTML = '<i class="fas fa-sync-alt"></i>';
        refreshBtn.disabled = false;
      }
    }

    function getCategoryName(category) {
      const names = {
        india: 'भारत',
        world: 'विश्व',
        sports: 'खेल',
        business: 'व्यापार',
        entertainment: 'मनोरंजन',
        technology: 'टेक्नोलॉजी'
      };
      return names[category] || category;
    }
  </script>
</body>
</html>
